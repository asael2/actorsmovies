"use strict";angular.module("thepelisApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/actor/:actorId/:actorName?",{templateUrl:"views/actor.html",controller:"ActorCtrl"}).when("/trailer/:movieId/:actorName?",{templateUrl:"views/trailer.html",controller:"TrailerCtrl"}).otherwise({redirectTo:"/"})}]).directive("a",function(){return{restrict:"E",link:function(a,b,c){"#"===c.href&&b.on("click",function(a){a.preventDefault()})}}}).directive("myYoutube",["$sce",function(a){return{restrict:"EA",scope:{code:"="},replace:!0,template:'<div style="height:360px;"><iframe style="overflow:hidden;height:100%;width:100%" width="100%" height="100%" src="{{url}}" frameborder="0" allowfullscreen></iframe></div>',link:function(b){b.$watch("code",function(c){c&&(b.url=a.trustAsResourceUrl("http://www.youtube.com/embed/"+c+"?hd=1&rel=0&autohide=1&showinfo=0&autoplay=1"))})}}}]),angular.module("thepelisApp").controller("MainCtrl",["$scope","$http",function(a,b){function c(a){$("body").css("background","url("+a+")"),$("body").css("background-size","cover"),$("body").css("background-repeat","no-repeat"),$("body").css("background-attachment","fixed"),$("body").css("-webkit-background-size","cover"),$("body").css("-moz-background-size","cover"),$("body").css("-o-background-size","cover")}$("#searchBox").focus(),c("../images/movies.jpg"),document.title="The Pelis";var d="http://api.themoviedb.org/3/",e="search/person",f="?api_key=7d01deb61b99198006a40696c46d3f29&query=";a.fetchResults=function(){""!==a.searchTerm?b.get(d+e+f+a.searchTerm+"&search_type=ngram").success(function(b){a.actors=b.results,console.log(b)}):a.actors=""}}]),angular.module("thepelisApp").controller("ActorCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(a){$("body").css("background","url("+a+")"),$("body").css("background-size","cover"),$("body").css("background-repeat","no-repeat"),$("body").css("background-attachment","fixed"),$("body").css("-webkit-background-size","cover"),$("body").css("-moz-background-size","cover"),$("body").css("-o-background-size","cover")}d("../images/background.jpg");var e="http://api.themoviedb.org/3/",f=c.actorId,g="?api_key=7d01deb61b99198006a40696c46d3f29&query=";a.fetchActorMovies=function(){a.actorName=c.actorName,a.orderByField="release_date",a.reverseSort=!0,document.title=a.actorName,b.get(e+"person/"+f+"/movie_credits"+g+"&append_to_response=trailers").success(function(b){console.log(b),a.movies=b.cast})}}]),angular.module("thepelisApp").controller("TrailerCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(a){$("body").css("background","url("+a+")"),$("body").css("background-size","cover"),$("body").css("background-repeat","no-repeat"),$("body").css("background-attachment","fixed"),$("body").css("-webkit-background-size","cover"),$("body").css("-moz-background-size","cover"),$("body").css("-o-background-size","cover")}a.backBtn=function(){window.history.back()};var e=c.movieId;a.getTrailer=function(){b.get("https://api.themoviedb.org/3/movie/"+e+"?api_key=7d01deb61b99198006a40696c46d3f29&append_to_response=trailers,credits").success(function(b){console.log(b),a.actorName=c.actorName,a.title=b.title,a.releaseDate=b.release_date,a.overview=b.overview,a.website=b.homepage,a.backdrop_path=b.backdrop_path,a.hasTrailer=b.trailers.youtube.length,a.hasTrailer?a.code=b.trailers.youtube[0].source:"",a.cast=b.credits.cast,d(a.backdrop_path?"http://image.tmdb.org/t/p/w396"+a.backdrop_path:"../images/background.jpg")})}}]);